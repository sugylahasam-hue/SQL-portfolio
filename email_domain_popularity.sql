-- Задача: вывести популярность доменных имён пользователей по электронной почте
-- Результат сортируется сначала по убыванию количества пользователей, затем по возрастанию домена

SELECT 
    SUBSTRING_INDEX(email, '@', -1) AS domain,  -- извлекаем домен после @
    COUNT(*) AS count                           -- считаем количество пользователей с этим доменом
FROM Users
GROUP BY domain
ORDER BY count DESC, domain ASC;                -- сортировка по убыванию популярности и по имени домена
